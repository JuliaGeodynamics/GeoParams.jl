import{_ as p,C as o,c as h,o as r,aA as t,j as s,G as e,a as n,w as l}from"./chunks/framework.C6eBHTcw.js";const C=JSON.parse('{"title":"Phase Diagrams","description":"","frontmatter":{},"headers":[],"relativePath":"man/phasediagrams.md","filePath":"man/phasediagrams.md","lastUpdated":null}'),k={name:"man/phasediagrams.md"},d={class:"jldocstring custom-block",open:""},c={class:"jldocstring custom-block",open:""};function g(E,i,y,m,u,F){const a=o("Badge");return r(),h("div",null,[i[8]||(i[8]=t('<h1 id="Phase-Diagrams" tabindex="-1">Phase Diagrams <a class="header-anchor" href="#Phase-Diagrams" aria-label="Permalink to &quot;Phase Diagrams {#Phase-Diagrams}&quot;">​</a></h1><p>It is possible to employ phase diagrams as lookup tables, which can be used to compute density, melt fraction or seismic properties, for example.</p><h1 id="perple-x" tabindex="-1">Perple_X <a class="header-anchor" href="#perple-x" aria-label="Permalink to &quot;Perple_X&quot;">​</a></h1><p>A popular way to compute phase diagrams (pseudosections) for a given (fixed) chemical composition as a function of pressure and temperature is by using <a href="https://www.perplex.ethz.ch" target="_blank" rel="noreferrer">Perple_X</a>. Once a stable assemblage is computed, through Gibbs energy minimisation, it allows you to output a large number of properties such as density, melt fraction or seismic velocities.</p><p>Within GeoParams, we can import this diagram (provided it is formatted in the same manner as <code>LaMEM</code> expects <code>Perple_X</code> input to be).</p>',5)),s("details",d,[s("summary",null,[i[0]||(i[0]=s("a",{id:"GeoParams.PerpleX_LaMEM_Diagram",href:"#GeoParams.PerpleX_LaMEM_Diagram"},[s("span",{class:"jlbinding"},"GeoParams.PerpleX_LaMEM_Diagram")],-1)),i[1]||(i[1]=n()),e(a,{type:"info",class:"jlObjectType jlFunction",text:"Function"})]),i[3]||(i[3]=t(`<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PD_Data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> PerpleX_LaMEM_Diagram</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fname</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; CharDim </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nothing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AbstractString</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Perple_X/LaMEM&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Reads a precomputed phase diagram in the <code>Perple_X/MAGEMin/LaMEM</code> format (which is a phase diagram computed using <code>Perple_X/MAGEMin</code>, but formatted in a manner that is readable using LaMEM or potentially any other geodynamic code). The data is stored in the <code>PhaseDiagram_LookupTable</code> structure.</p><p>If the <code>CharDim</code> object is specified, the values of all diagrams will be non-dimensionalized. The type kwarg is a string that indicates the type of phase diagram (default is &quot;Perple_X/LaMEM&quot;).</p><p><strong>Example</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PD_Data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> PerpleX_LaMEM_Diagram</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./test_data/Peridotite.in&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Perple_X</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">LaMEM Phase Diagram Lookup Table</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                      File    </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   ./</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">test_data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Peridotite</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">in</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                      T       </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   293.0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1573.000039</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                      P       </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   1.0e7</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2.9999999944e9</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                      fields  </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   :meltRho</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:meltRho</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:meltFrac</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:rockRho</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:Rho</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:rockVp</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                                  :rockVs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:rockVpVs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:meltVp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:meltVs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:meltVpVs</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                                  :Vp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:Vs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:VpVs</span></span></code></pre></div><p>Once imported, the properties on the diagram can be interpolated in a simple manner:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>julia&gt; PD_Data.Rho(1500,1e7)</span></span>
<span class="line"><span>3042.836820256982</span></span></code></pre></div><p>This also works for vectors or arrays:</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> T </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1500</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1800</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1233</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1300</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> P </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1e8</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1e9</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1e7</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1e7</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> rho </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PD_Data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Rho</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.(T,P)</span></span></code></pre></div><p>(Note the dot <code>.</code> in front of the bracket while evaluating arrays).</p><p>The fields that are available depend on what is listed in the diagram file. The units of the fields are automatically evaluated, and employed to non-dimensionalize the parameters if <code>CharDim</code> is specified.</p><p><strong>Algorithm</strong></p><p>Internally, we employ a linear 2D interpolation scheme for evaluating the phase diagram values at arbitrary (T,P) points using bilinear interpolation. Values outside the range of the diagram are set to the boundary of the diagram. The interpolation object is directly encoded in the \`PhaseDiagram_LookupTable\`\` object.</p>`,13)),e(a,{type:"info",class:"source-link",text:"source"},{default:l(()=>[...i[2]||(i[2]=[s("a",{href:"https://github.com/JuliaGeodynamics/GeoParams.jl/blob/52aca4c00df4f093b718ea5270d59d7ce518d99b/src/PhaseDiagrams/PhaseDiagrams.jl#L75-L117",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1})]),s("details",c,[s("summary",null,[i[4]||(i[4]=s("a",{id:"GeoParams.MaterialParameters.PhaseDiagrams.PhaseDiagram_LookupTable",href:"#GeoParams.MaterialParameters.PhaseDiagrams.PhaseDiagram_LookupTable"},[s("span",{class:"jlbinding"},"GeoParams.MaterialParameters.PhaseDiagrams.PhaseDiagram_LookupTable")],-1)),i[5]||(i[5]=n()),e(a,{type:"info",class:"jlObjectType jlType",text:"Type"})]),i[7]||(i[7]=t('<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Contains data of a Phase Diagram that is regularly spaced </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> P </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> T</span></span></code></pre></div><p><strong>Fields</strong></p><ul><li><p><code>Type::Ptr{UInt8}</code> : String pointer indicating the type of phase diagram (e.g., &quot;Perple_X/MAGEMin/LaMEM&quot;)</p></li><li><p><code>Name::Ptr{UInt8}</code> : String pointer to the name of the phase diagram file</p></li><li><p><code>rockRho::Union{T, Nothing}</code> : Interpolation object for rock density</p></li><li><p><code>meltRho::Union{T, Nothing}</code> : Interpolation object for melt density</p></li><li><p><code>meltFrac::Union{T, Nothing}</code> : Interpolation object for melt fraction</p></li><li><p><code>Rho::Union{T, Nothing}</code> : Interpolation object for total density</p></li><li><p><code>rockVp::Union{T, Nothing}</code> : Interpolation object for rock P-wave velocity</p></li><li><p><code>rockVs::Union{T, Nothing}</code> : Interpolation object for rock S-wave velocity</p></li><li><p><code>rockVpVs::Union{T, Nothing}</code> : Interpolation object for rock Vp/Vs ratio</p></li><li><p><code>meltVp::Union{T, Nothing}</code> : Interpolation object for melt P-wave velocity</p></li><li><p><code>meltVs::Union{T, Nothing}</code> : Interpolation object for melt S-wave velocity</p></li><li><p><code>meltVpVs::Union{T, Nothing}</code> : Interpolation object for melt Vp/Vs ratio</p></li><li><p><code>Vp::Union{T, Nothing}</code> : Interpolation object for total P-wave velocity</p></li><li><p><code>Vs::Union{T, Nothing}</code> : Interpolation object for total S-wave velocity</p></li><li><p><code>VpVs::Union{T, Nothing}</code> : Interpolation object for total Vp/Vs ratio</p></li><li><p><code>SpecificCp::Union{T, Nothing}</code> : Interpolation object for specific heat capacity</p></li><li><p><code>solid_Vp::Union{T, Nothing}</code> : Interpolation object for solid P-wave velocity</p></li><li><p><code>solid_Vs::Union{T, Nothing}</code> : Interpolation object for solid S-wave velocity</p></li><li><p><code>melt_bulkModulus::Union{T, Nothing}</code> : Interpolation object for melt bulk modulus</p></li><li><p><code>solid_bulkModulus::Union{T, Nothing}</code> : Interpolation object for solid bulk modulus</p></li><li><p><code>solid_shearModulus::Union{T, Nothing}</code> : Interpolation object for solid shear modulus</p></li><li><p><code>Vp_uncorrected::Union{T, Nothing}</code> : Interpolation object for uncorrected P-wave velocity</p></li><li><p><code>Vs_uncorrected::Union{T, Nothing}</code> : Interpolation object for uncorrected S-wave velocity</p></li></ul>',3)),e(a,{type:"info",class:"source-link",text:"source"},{default:l(()=>[...i[6]||(i[6]=[s("a",{href:"https://github.com/JuliaGeodynamics/GeoParams.jl/blob/52aca4c00df4f093b718ea5270d59d7ce518d99b/src/PhaseDiagrams/PhaseDiagrams.jl#L17-L44",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1})])])}const f=p(k,[["render",g]]);export{C as __pageData,f as default};
